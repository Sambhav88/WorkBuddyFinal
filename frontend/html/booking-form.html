<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Form - WorkBuddy</title>
    <link rel="stylesheet" href="../css/styles.css">
    <style>
        .booking-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 20px;
        }
        
        .page-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .page-header h1 {
            color: #2c3e50;
            margin-bottom: 1rem;
        }
        
        .booking-form {
            background-color: #fff;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .form-group textarea {
            height: 120px;
            resize: vertical;
        }
        
        .selected-services {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .services-list {
            list-style: none;
            padding: 0;
        }
        
        .service-item {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid #eee;
        }
        
        .service-item:last-child {
            border-bottom: none;
        }
        
        .service-info h4 {
            margin: 0 0 0.25rem 0;
            color: #2c3e50;
        }
        
        .service-info p {
            margin: 0;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        .btn {
            padding: 12px 30px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            font-size: 1rem;
        }
        
        .btn-primary {
            background-color: #3498db;
            color: #fff;
            width: 100%;
        }
        
        .btn-primary:hover {
            background-color: #2980b9;
        }
        
        .pricing-info {
            background-color: #e8f4fc;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .pricing-info h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        
        .pricing-details {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
        }
        
        .total-price {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>WorkBuddy</h1>
            <nav>
                <ul>
                    <li><a href="home.html">Home</a></li>
                    <li><a href="customer-categories.html">Categories</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="booking-hero">
        <div class="container booking-hero-content">
            <h1>Service Booking Form</h1>
            <p>Provide your details to book the selected service</p>
        </div>
    </section>

    <main>
        <div class="container">
            <div class="booking-form-container">
                <div class="service-summary">
                    <div class="service-icon" style="background-image: url('../images/subcategories/electrician.svg');"></div>
                    <h2>Electrician Service</h2>
                    <p>Professional electrical services for your home</p>
                    <div class="service-rating">
                        <span>4.8 ★</span>
                        <span>(128 reviews)</span>
                    </div>
                </div>
                
                <div class="booking-form-card">
                    <div class="form-header">
                        <h2>Booking Details</h2>
                        <p>Fill in the information below to complete your booking</p>
                    </div>
                    
                    <form id="bookingForm">
                        <div class="form-group">
                            <label for="fullName">Full Name *</label>
                            <input type="text" id="fullName" name="fullName" required placeholder="Enter your full name">
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Email Address *</label>
                            <input type="email" id="email" name="email" required placeholder="Enter your email address">
                        </div>
                        
                        <div class="form-group">
                            <label for="phone">Phone Number *</label>
                            <input type="tel" id="phone" name="phone" required placeholder="Enter your phone number">
                        </div>
                        
                        <div class="form-group">
                            <label for="address">Service Address *</label>
                            <textarea id="address" name="address" required placeholder="Enter your complete address"></textarea>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="date">Preferred Date *</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="time">Preferred Time *</label>
                                <select id="time" name="time" required>
                                    <option value="">Select time slot</option>
                                    <option value="morning">Morning (9:00 AM - 12:00 PM)</option>
                                    <option value="afternoon">Afternoon (12:00 PM - 4:00 PM)</option>
                                    <option value="evening">Evening (4:00 PM - 8:00 PM)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="instructions">Special Instructions</label>
                            <textarea id="instructions" name="instructions" placeholder="Any specific requirements or instructions..."></textarea>
                        </div>
                        
                        <div class="payment-summary">
                            <h3>Payment Summary</h3>
                            <div class="summary-item">
                                <div class="summary-label">Service Charge:</div>
                                <div class="summary-value">₹500</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Service Fee:</div>
                                <div class="summary-value">₹50</div>
                            </div>
                            <div class="summary-item total">
                                <div class="summary-label">Total Amount:</div>
                                <div class="summary-value">₹550</div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="terms" name="terms" required>
                                I agree to the <a href="#">Terms & Conditions</a> and <a href="#">Privacy Policy</a>
                            </label>
                        </div>
                        
                        <button type="submit" class="submit-btn">Confirm Booking & Pay</button>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 WorkBuddy. All rights reserved.</p>
        </div>
    </footer>

    <script src="../js/main.js"></script>
    <script src="../js/api.js"></script>
    <script>
        // Set minimum date to today
        document.getElementById('date').min = new Date().toISOString().split('T')[0];
        
        // Form submission
        document.getElementById('bookingForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Get form data
            const formData = new FormData(this);
            const bookingData = {
                address: formData.get('address'),
                date: formData.get('date'),
                time: formData.get('time'),
                description: formData.get('description'),
                specialRequests: formData.get('specialRequests'),
                // In a real app, you would get the user ID from the session
                userId: 1, // Placeholder user ID
                // Service IDs would be selected by the user
                serviceIds: [1, 2] // Placeholder service IDs
            };
            
            try {
                // Submit booking to API
                const result = await window.WorkBuddyAPI.createBooking(bookingData);
                console.log('Booking created:', result);
                
                // Show success message
                window.WorkBuddy.showNotification('Booking request submitted successfully! Our intelligent algorithm is now matching you with the best professionals based on location, price, reviews, and category expertise. Only active workers will be considered for assignment. You will receive a notification once a worker is assigned.', 'success');
                
                // Redirect to confirmation page after a delay
                setTimeout(() => {
                    window.location.href = 'booking-confirmation.html';
                }, 3000);
            } catch (error) {
                console.error('Error creating booking:', error);
                window.WorkBuddy.showNotification('Error submitting booking request. Please try again.', 'error');
            }
        });
    </script>
</body>
</html>